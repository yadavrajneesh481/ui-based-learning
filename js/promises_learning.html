<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 16: JavaScript Promises</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        .home-link {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 15px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .home-link:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        .home-link:focus {
            outline: 2px solid #ffc107;
            outline-offset: 2px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .section h3 {
            color: #764ba2;
            margin: 20px 0 10px 0;
            font-size: 1.3em;
        }

        .hindi-text {
            color: #555;
            font-style: italic;
            margin: 10px 0;
            padding: 10px;
            background: #fff3cd;
            border-radius: 8px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .interactive-demo {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .promise-visualizer {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .promise-state {
            padding: 20px 30px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            min-width: 150px;
            margin: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .pending {
            background: #ffc107;
            color: #000;
        }

        .fulfilled {
            background: #28a745;
            color: white;
        }

        .rejected {
            background: #dc3545;
            color: white;
        }

        .demo-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .output-box {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            min-height: 60px;
            font-family: monospace;
        }

        .chain-visualizer {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .chain-step {
            background: #667eea;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin: 10px;
            position: relative;
        }

        .arrow {
            font-size: 2em;
            color: #667eea;
            margin: 0 10px;
        }

        .combinator-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .combinator-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .combinator-card h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .question-section {
            background: #fff;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border: 2px solid #667eea;
        }

        .question-section h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .answer {
            display: none;
            margin-top: 10px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .toggle-answer {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .toggle-answer:hover {
            background: #218838;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .animating {
            animation: pulse 0.5s ease-in-out;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="home-link" aria-label="Return to JavaScript course homepage">üè† Back to Course Home</a>
        <header>
            <h1>üìò Day 16: JavaScript Promises</h1>
            <p>Asynchronous Programming ko Master Karo</p>
        </header>

        <div class="content">
            <!-- Introduction Section -->
            <div class="section">
                <h2>üéØ Promise Kya Hai?</h2>
                <p class="hindi-text">
                    <strong>Promise</strong> JavaScript mein ek object hai jo future mein kisi value ko represent karta hai. 
                    Matlab, agar aapko koi kaam abhi complete nahi hua hai, lekin future mein hoga, toh Promise use hota hai.
                    Jaise ki aap kisi dost se kehte ho "Main kal tujhe book dunga" - yeh ek promise hai!
                </p>
                
                <h3>Technical Definition</h3>
                <p>
                    A <strong>Promise</strong> is an object representing the eventual completion or failure of an asynchronous operation. 
                    It serves as a placeholder for a value that may not be available yet but will be resolved in the future.
                </p>

                <div class="interactive-demo">
                    <h3>Promise States Visualizer</h3>
                    <p class="hindi-text">Promise ke teen states hote hain. Niche buttons click karke dekho:</p>
                    
                    <div class="promise-visualizer">
                        <div class="promise-state pending" id="pendingState">
                            PENDING<br>
                            <small>Intezaar mein...</small>
                        </div>
                        <div class="promise-state fulfilled" id="fulfilledState">
                            FULFILLED<br>
                            <small>Ho gaya!</small>
                        </div>
                        <div class="promise-state rejected" id="rejectedState">
                            REJECTED<br>
                            <small>Nahi hua :(</small>
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <button class="demo-button" onclick="demonstratePromise('fulfilled')">‚úÖ Resolve Promise</button>
                        <button class="demo-button" onclick="demonstratePromise('rejected')">‚ùå Reject Promise</button>
                    </div>

                    <div class="output-box" id="promiseOutput">Output yahan dikhega...</div>
                </div>
            </div>

            <!-- Creating Promises Section -->
            <div class="section">
                <h2>üî® Promise Kaise Banaye?</h2>
                <p class="hindi-text">
                    Promise banane ke liye <code>new Promise()</code> use karte hain. Iske andar ek function hota hai 
                    jisme <code>resolve</code> aur <code>reject</code> parameters hote hain.
                </p>

                <div class="code-block">
<pre>// Basic Promise Syntax
const myPromise = new Promise((resolve, reject) => {
    // Async operation yahan likho
    const success = true;
    
    if (success) {
        resolve("Kaam ho gaya!"); // Success
    } else {
        reject("Error aa gaya!"); // Failure
    }
});</pre>
                </div>

                <div class="interactive-demo">
                    <h3>Live Promise Demo</h3>
                    <p class="hindi-text">Ek real-world example: API call simulate karte hain (2 seconds delay)</p>
                    
                    <button class="demo-button" onclick="createLivePromise()">üöÄ API Call Karo</button>
                    <div class="output-box" id="livePromiseOutput">Result yahan aayega...</div>
                </div>
            </div>

            <!-- Promise Chaining Section -->
            <div class="section">
                <h2>‚õìÔ∏è Promise Chaining</h2>
                <p class="hindi-text">
                    Jab ek promise complete ho jaye, uske baad dusra kaam karna ho toh <code>.then()</code> use karte hain.
                    Aur agar error handle karna ho toh <code>.catch()</code> use karte hain. Yeh chain ban jaati hai!
                </p>

                <div class="chain-visualizer" id="chainViz">
                    <div class="chain-step">Promise 1</div>
                    <span class="arrow">‚Üí</span>
                    <div class="chain-step">.then()</div>
                    <span class="arrow">‚Üí</span>
                    <div class="chain-step">.then()</div>
                    <span class="arrow">‚Üí</span>
                    <div class="chain-step">.catch()</div>
                </div>

                <div class="code-block">
<pre>// Promise Chaining Example
fetchUser()
    .then(user => {
        console.log('User mila:', user);
        return fetchPosts(user.id);
    })
    .then(posts => {
        console.log('Posts mile:', posts);
        return fetchComments(posts[0].id);
    })
    .then(comments => {
        console.log('Comments mile:', comments);
    })
    .catch(error => {
        console.error('Error:', error);
    });</pre>
                </div>

                <div class="interactive-demo">
                    <h3>Chaining Demo</h3>
                    <button class="demo-button" onclick="demonstrateChaining()">üîó Chain Execute Karo</button>
                    <div class="output-box" id="chainingOutput">Steps yahan dikhenge...</div>
                </div>
            </div>

            <!-- Promise Combinators Section -->
            <div class="section">
                <h2>üé≠ Promise Combinators</h2>
                <p class="hindi-text">
                    Jab multiple promises ek saath handle karne ho toh combinators use karte hain. 
                    Yeh bahut powerful hain aur production code mein bahut use hote hain!
                </p>

                <div class="combinator-demo">
                    <div class="combinator-card">
                        <h4>Promise.all()</h4>
                        <p class="hindi-text">Sab promises complete hone ka intezaar karo</p>
                        <button class="demo-button" onclick="demoAll()">Test</button>
                    </div>

                    <div class="combinator-card">
                        <h4>Promise.race()</h4>
                        <p class="hindi-text">Jo pehle complete ho use le lo</p>
                        <button class="demo-button" onclick="demoRace()">Test</button>
                    </div>

                    <div class="combinator-card">
                        <h4>Promise.any()</h4>
                        <p class="hindi-text">Koi bhi ek fulfilled ho jaye</p>
                        <button class="demo-button" onclick="demoAny()">Test</button>
                    </div>

                    <div class="combinator-card">
                        <h4>Promise.allSettled()</h4>
                        <p class="hindi-text">Sab settle hone tak wait karo</p>
                        <button class="demo-button" onclick="demoAllSettled()">Test</button>
                    </div>
                </div>

                <div class="output-box" id="combinatorOutput">Combinator results yahan dikhenge...</div>

                <div class="code-block">
<pre>// Promise.all - Sabhi promises resolve honi chahiye
Promise.all([promise1, promise2, promise3])
    .then(results => console.log(results));

// Promise.race - Pehla complete hone wala promise
Promise.race([promise1, promise2, promise3])
    .then(result => console.log(result));

// Promise.any - Pehla fulfilled promise
Promise.any([promise1, promise2, promise3])
    .then(result => console.log(result));

// Promise.allSettled - Sab settle ho jaye
Promise.allSettled([promise1, promise2, promise3])
    .then(results => console.log(results));</pre>
                </div>
            </div>

            <!-- Callback to Promise Conversion -->
            <div class="section">
                <h2>üîÑ Callback se Promise Conversion</h2>
                <p class="hindi-text">
                    Purane code mein callbacks use hote the jo "callback hell" create karte the. 
                    Promises se code clean aur readable ban jata hai!
                </p>

                <h3>Before (Callback Hell):</h3>
                <div class="code-block">
<pre>// Callback Hell - Avoid this!
getData(function(a) {
    getMoreData(a, function(b) {
        getMoreData(b, function(c) {
            getMoreData(c, function(d) {
                console.log('Finally:', d);
            });
        });
    });
});</pre>
                </div>

                <h3>After (With Promises):</h3>
                <div class="code-block">
<pre>// Clean Promise Chain
getData()
    .then(a => getMoreData(a))
    .then(b => getMoreData(b))
    .then(c => getMoreData(c))
    .then(d => console.log('Finally:', d))
    .catch(error => console.error(error));</pre>
                </div>

                <div class="interactive-demo">
                    <h3>Conversion Demo</h3>
                    <button class="demo-button" onclick="showCallbackHell()">üò± Callback Hell</button>
                    <button class="demo-button" onclick="showPromiseVersion()">üòä Promise Version</button>
                    <div class="output-box" id="conversionOutput">Comparison yahan dikhega...</div>
                </div>
            </div>

            <!-- Interview Questions Section -->
            <div class="section">
                <h2>üíº Interview Questions (5-7 Questions)</h2>
                
                <div class="question-section">
                    <h4>Q1: What is a Promise in JavaScript?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(1)">Show Answer</button>
                    <div class="answer" id="answer1">
                        <p><strong>Answer:</strong></p>
                        <p>A Promise is an object representing the eventual completion or failure of an asynchronous operation. 
                        It has three states: pending, fulfilled, and rejected. Promises help avoid callback hell and make 
                        asynchronous code more readable and maintainable.</p>
                        <p class="hindi-text">Promise ek object hai jo future mein complete hone wale kaam ko represent karta hai. 
                        Yeh callback hell se bachata hai aur code ko clean banata hai.</p>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Q2: What is the difference between Promise.all() and Promise.race()?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(2)">Show Answer</button>
                    <div class="answer" id="answer2">
                        <p><strong>Answer:</strong></p>
                        <p><strong>Promise.all():</strong> Waits for all promises to resolve. If any promise rejects, the entire operation rejects. 
                        Returns an array of all resolved values.</p>
                        <p><strong>Promise.race():</strong> Returns as soon as the first promise settles (either resolves or rejects). 
                        Only returns the value of the first settled promise.</p>
                        <p class="hindi-text">Promise.all() sabhi promises ka wait karta hai, jabki Promise.race() jo pehle complete ho use return kar deta hai.</p>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Q3: How do you handle errors in Promises?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(3)">Show Answer</button>
                    <div class="answer" id="answer3">
                        <p><strong>Answer:</strong></p>
                        <p>Errors in Promises can be handled using:</p>
                        <ul>
                            <li><strong>.catch():</strong> Catches any error in the promise chain</li>
                            <li><strong>.then(onSuccess, onError):</strong> Second parameter handles errors</li>
                            <li><strong>try-catch with async/await:</strong> Modern syntax for error handling</li>
                        </ul>
                        <p class="hindi-text">Promises mein errors ko .catch() se handle karte hain ya phir async/await ke saath try-catch use karte hain.</p>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Q4: What is Promise chaining and why is it useful?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(4)">Show Answer</button>
                    <div class="answer" id="answer4">
                        <p><strong>Answer:</strong></p>
                        <p>Promise chaining is the practice of executing asynchronous operations sequentially by returning promises 
                        from .then() handlers. Each .then() receives the result of the previous operation.</p>
                        <p><strong>Benefits:</strong></p>
                        <ul>
                            <li>Avoids callback hell/pyramid of doom</li>
                            <li>Makes code more readable and maintainable</li>
                            <li>Provides better error handling with a single .catch()</li>
                            <li>Enables sequential async operations</li>
                        </ul>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Q5: What is the difference between Promise.any() and Promise.allSettled()?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(5)">Show Answer</button>
                    <div class="answer" id="answer5">
                        <p><strong>Answer:</strong></p>
                        <p><strong>Promise.any():</strong> Returns as soon as any promise fulfills. Rejects only if ALL promises reject. 
                        Useful when you need at least one successful result.</p>
                        <p><strong>Promise.allSettled():</strong> Waits for all promises to settle (either resolve or reject). 
                        Always fulfills with an array of objects describing each promise's outcome. Never rejects.</p>
                        <p class="hindi-text">Promise.any() ko sirf ek success chahiye, jabki Promise.allSettled() sab promises ka 
                        result deta hai chahe wo success ho ya failure.</p>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Q6: How would you convert a callback-based function to return a Promise?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(6)">Show Answer</button>
                    <div class="answer" id="answer6">
                        <p><strong>Answer:</strong></p>
                        <div class="code-block">
<pre>// Callback version
function getData(callback) {
    setTimeout(() => {
        callback(null, 'data');
    }, 1000);
}

// Promise version
function getDataPromise() {
    return new Promise((resolve, reject) => {
        getData((error, data) => {
            if (error) {
                reject(error);
            } else {
                resolve(data);
            }
        });
    });
}</pre>
                        </div>
                        <p class="hindi-text">Callback function ko Promise mein convert karne ke liye new Promise() create karo 
                        aur callback ke success case mein resolve() aur error case mein reject() call karo.</p>
                    </div>
                </div>

                <div class="question-section">
                    <h4>Q7: What happens if you don't return a value in a .then() handler?</h4>
                    <button class="toggle-answer" onclick="toggleAnswer(7)">Show Answer</button>
                    <div class="answer" id="answer7">
                        <p><strong>Answer:</strong></p>
                        <p>If you don't return a value in a .then() handler, the next .then() in the chain will receive 
                        <code>undefined</code> as its argument. This can lead to bugs if subsequent handlers expect a value.</p>
                        <div class="code-block">
<pre>promise
    .then(data => {
        console.log(data);
        // No return statement
    })
    .then(result => {
        console.log(result); // undefined
    });</pre>
                        </div>
                        <p class="hindi-text">Agar .then() mein kuch return nahi karoge toh next .then() ko undefined milega. 
                        Hamesha value return karo agar chain continue karni ho.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Promise State Demonstration
        function demonstratePromise(state) {
            const output = document.getElementById('promiseOutput');
            const pending = document.getElementById('pendingState');
            const fulfilled = document.getElementById('fulfilledState');
            const rejected = document.getElementById('rejectedState');

            // Reset states
            [pending, fulfilled, rejected].forEach(el => el.classList.remove('animating'));

            output.innerHTML = 'Promise creating...';
            pending.classList.add('animating');

            setTimeout(() => {
                if (state === 'fulfilled') {
                    fulfilled.classList.add('animating');
                    output.innerHTML = '‚úÖ Promise Resolved! Data: { user: "John", age: 25 }';
                    output.style.background = '#d4edda';
                } else {
                    rejected.classList.add('animating');
                    output.innerHTML = '‚ùå Promise Rejected! Error: Network Error';
                    output.style.background = '#f8d7da';
                }
            }, 1000);
        }

        // Live Promise Demo
        function createLivePromise() {
            const output = document.getElementById('livePromiseOutput');
            output.innerHTML = '‚è≥ API call chal raha hai...';
            output.style.background = '#fff3cd';

            const apiCall = new Promise((resolve, reject) => {
                setTimeout(() => {
                    const success = Math.random() > 0.3;
                    if (success) {
                        resolve({ users: ['Alice', 'Bob', 'Charlie'], status: 200 });
                    } else {
                        reject('Server Error 500');
                    }
                }, 2000);
            });

            apiCall
                .then(data => {
                    output.innerHTML = `‚úÖ Success! Data received: ${JSON.stringify(data)}`;
                    output.style.background = '#d4edda';
                })
                .catch(error => {
                    output.innerHTML = `‚ùå Error: ${error}`;
                    output.style.background = '#f8d7da';
                });
        }

        // Promise Chaining Demo
        function demonstrateChaining() {
            const output = document.getElementById('chainingOutput');
            output.innerHTML = 'Starting chain...<br>';

            const step1 = () => new Promise(resolve => {
                setTimeout(() => resolve('Step 1 complete'), 500);
            });

            const step2 = (prev) => new Promise(resolve => {
                setTimeout(() => resolve(prev + ' ‚Üí Step 2 complete'), 500);
            });

            const step3 = (prev) => new Promise(resolve => {
                setTimeout(() => resolve(prev + ' ‚Üí Step 3 complete'), 500);
            });

            step1()
                .then(result => {
                    output.innerHTML += `<br>‚úÖ ${result}`;
                    return step2(result);
                })
                .then(result => {
                    output.innerHTML += `<br>‚úÖ ${result}`;
                    return step3(result);
                })
                .then(result => {
                    output.innerHTML += `<br>‚úÖ ${result}`;
                    output.innerHTML += `<br><br><strong>üéâ Sab steps complete!</strong>`;
                })
                .catch(error => {
                    output.innerHTML += `<br>‚ùå Error: ${error}`;
                });
        }

        // Promise Combinators
        function demoAll() {
            const output = document.getElementById('combinatorOutput');
            output.innerHTML = '‚è≥ Promise.all() running...';

            const p1 = Promise.resolve('Promise 1');
            const p2 = new Promise(resolve => setTimeout(() => resolve('Promise 2'), 1000));
            const p3 = Promise.resolve('Promise 3');

            Promise.all([p1, p2, p3])
                .then(results => {
                    output.innerHTML = `‚úÖ All resolved: [${results.join(', ')}]`;
                    output.style.background = '#d4edda';
                });
        }

        function demoRace() {
            const output = document.getElementById('combinatorOutput');
            output.innerHTML = '‚è≥ Promise.race() running...';

            const p1 = new Promise(resolve => setTimeout(() => resolve('Slow Promise (2s)'), 2000));
            const p2 = new Promise(resolve => setTimeout(() => resolve('Fast Promise (500ms)'), 500));
            const p3 = new Promise(resolve => setTimeout(() => resolve('Medium Promise (1s)'), 1000));

            Promise.race([p1, p2, p3])
                .then(result => {
                    output.innerHTML = `üèÜ Winner: ${result}`;
                    output.style.background = '#d4edda';
                });
        }

        function demoAny() {
            const output = document.getElementById('combinatorOutput');
            output.innerHTML = '‚è≥ Promise.any() running...';

            const p1 = Promise.reject('Error 1');
            const p2 = new Promise(resolve => setTimeout(() => resolve('Success!'), 1000));
            const p3 = Promise.reject('Error 2');

            Promise.any([p1, p2, p3])
                .then(result => {
                    output.innerHTML = `‚úÖ First fulfilled: ${result}`;
                    output.style.background = '#d4edda';
                })
                .catch(error => {
                    output.innerHTML = `‚ùå All rejected: ${error}`;
                    output.style.background = '#f8d7da';
                });
        }

        function demoAllSettled() {
            const output = document.getElementById('combinatorOutput');
            output.innerHTML = '‚è≥ Promise.allSettled() running...';

            const p1 = Promise.resolve('Success 1');
            const p2 = Promise.reject('Error 1');
            const p3 = new Promise(resolve => setTimeout(() => resolve('Success 2'), 1000));

            Promise.allSettled([p1, p2, p3])
                .then(results => {
                    const formatted = results.map((r, i) => 
                        `Promise ${i+1}: ${r.status} - ${r.value || r.reason}`
                    ).join('<br>');
                    output.innerHTML = `üìä All Settled:<br>${formatted}`;
                    output.style.background = '#d4edda';
                });
        }

        // Callback to Promise Conversion Demo
        function showCallbackHell() {
            const output = document.getElementById('conversionOutput');
            output.innerHTML = 'üò± Callback Hell executing...<br>';
            
            setTimeout(() => {
                output.innerHTML += 'Step 1 done<br>';
                setTimeout(() => {
                    output.innerHTML += '  Step 2 done<br>';
                    setTimeout(() => {
                        output.innerHTML += '    Step 3 done<br>';
                        setTimeout(() => {
                            output.innerHTML += '      Step 4 done - Nested callbacks! ü§Ø';
                            output.style.background = '#f8d7da';
                        }, 500);
                    }, 500);
                }, 500);
            }, 500);
        }

        function showPromiseVersion() {
            const output = document.getElementById('conversionOutput');
            output.innerHTML = 'üòä Promise Chain executing...<br>';
            
            const step = (num) => new Promise(resolve => {
                setTimeout(() => resolve(`Step ${num} done`), 500);
            });

            step(1)
                .then(result => {
                    output.innerHTML += result + '<br>';
                    return step(2);
                })
                .then(result => {
                    output.innerHTML += result + '<br>';
                    return step(3);
                })
                .then(result => {
                    output.innerHTML += result + '<br>';
                    return step(4);
                })
                .then(result => {
                    output.innerHTML += result + ' - Clean & Readable! ‚ú®';
                    output.style.background = '#d4edda';
                })
                .catch(error => {
                    output.innerHTML += `Error: ${error}`;
                });
        }

        // Toggle Answer Function
        function toggleAnswer(num) {
            const answer = document.getElementById(`answer${num}`);
            const button = answer.previousElementSibling;
            
            if (answer.style.display === 'none' || answer.style.display === '') {
                answer.style.display = 'block';
                button.textContent = 'Hide Answer';
                button.style.background = '#dc3545';
            } else {
                answer.style.display = 'none';
                button.textContent = 'Show Answer';
                button.style.background = '#28a745';
            }
        }
    </script>
</body>
</html>